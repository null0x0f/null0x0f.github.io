---
abbrlink: 1db60101
title: OPERATING SYSTEM
---
# Computer Operating System
## 导论
cs ->  hardware(io cpu...)   software(application)   data
![计算机系统层次结构.png](https://img1.imgtp.com/2023/09/06/d78muiI5.png)

### interface(接口)
hard - hard       example： USB   
soft - hard    操作系统通过instructions(指令集)      example: printf() API接口
### Virtual Machine
操作系统向用户提供一个容易理解和使用的计算机（虚拟的），用户对这个计算机操作将被操作系统转换成对计算机硬件的操作
![virtualmachine.png](https://img1.imgtp.com/2023/09/06/RRCokhXB.png)
## 计算机系统组成
CPU RAM DISK  IOdevice .....

### 中断
当所有事情发生时，CPU收到一个中断信号
CPU停下来正在做的事，转而执行中断处理程序，执行完毕会回到之前被中断的地方继续执行
操作系统是一个以中断驱动的系统
### 存储系统
cpu负责将指令从内存读入，所以程序必须在内存中才能运行
内存以字节为存储单位，每个字节都有一个地址与之对应，通过load/store指令可以访问指定地址的内存数据
load：将内存数据装入寄存器(Register)
store:将寄存器数据写入内存
![memory.png](https://img1.imgtp.com/2023/09/06/5VWEg8O2.png)

### I/O结构
![IO.png](https://img1.imgtp.com/2023/09/06/ILOc6hv1.png)
## 系统体系结构
### 单处理器系统
![单处理.png](https://img1.imgtp.com/2023/09/06/7zwB9zof.png)
### 多处理系统
两个或多个CPU
非对称处理
对称处理
### 集群系统    ->cloud computing  云计算
若干节点，多台计算机通过网络连接在一起,节点之间是松耦合关系
高可用
高性能计算

## 操作系统结构
### 单用户单道模式
### 多道程序设计
让CPU总有一个执行任务
### 分时系统(多任务系统)
多个用户共享一天计算机
分时系统为每个用户轮流分配等量的CPU时间
发出指令到即时结果的时间为响应时间
### 提供服务 
![操作系统提供服务.png](https://img1.imgtp.com/2023/09/06/S1Yj9gCu.png)
user interface 面向user
CLI   GUI   Batch
system calls 面向开发者
![标准c程序.png](https://img1.imgtp.com/2023/09/06/h7zkE4Ho.png)
usermode:执行用户代码
kernelmode:执行os代码
目的：确保os正确运行
实现方式：0表示kernel模式 1表示user模式
![trap.png](https://img1.imgtp.com/2023/09/06/jjIYKRgM.png)
## process Concept
### definition
#### process in memory
![process in memory](process in memory.png)
#### concurrency
![并发进程共享cpu.png](https://img1.imgtp.com/2023/09/06/78238sf4.png)
进程是一个程序的一次执行过程
进程是资源分配，保护和调度的基本单位
### PROCESS STATE
Running:此时进程的代码在cpu上运行
Ready:进程具备运行条件，等待分配cpu
Waiting:进程在等待某些时间的发生
![进程状态转换.png](https://img1.imgtp.com/2023/09/06/9TDwauXR.png)## process scheduling
### 进程切换
切换时机：
进入等待状态
进程被抢占CPU而进入就绪状态


切换过程：
保存被中断进程的上下文信息
修改被中断进程的控制信息
将被中断的进程加入相应的状态队列
调度一个新的进程并恢复他的上下文信息
#### 中断技术 
当发生某个异常事件，中止cpu上现行程序的运行
引出该事件的处理程序执行
执行完毕返回中断点继续执行
##### 外中断
来自cpu外部
异步中断（随机）
##### 内中断
硬件，程序异常，系统调用
##### 中断处理过程
context:save the context of the excuting process
![中断处理过程.png](https://img1.imgtp.com/2023/09/06/3EwqIMGY.png)
#### 特权指令和非特权指令
privileged instructions: only in kernel mode process switch
non - privileged instructions: only in usermode
#### 进程控制块
![进程控制块.png](https://img1.imgtp.com/2023/09/06/SwnDGm62.png)
###  进程队列
![进程队列.png](https://img1.imgtp.com/2023/09/06/qnq618S1.png)
### 进程调度
![进程调度.png](https://img1.imgtp.com/2023/09/06/Sv8dRAZb.png)
### 实验（创建子进程）
getpid:返回当前进程的id
wait(NULL)